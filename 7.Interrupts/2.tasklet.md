## Tasklets


Tasklets are bottom half mechanism built on top of softirqs.

Handlers of tasklets are executed by softirqs

Implementation
----------------

Tasklets are implemented on top of softirqs.

Tasklets are represented by two softirqs: HI_SOFTIRQ and TASKLET_SOFTIRQ.

The only difference in these types is that the HI_SOFTIRQ-based tasklets run prior to the TASKLET_SOFTIRQ based
tasklets.


Data Structure
----------------

```c++
tasklet_struct
Header File: <linux/interrupt.h>

struct tasklet_struct
{
        struct tasklet_struct *next; /* next tasklet in the list */
        unsigned long state;   /* state of the tasklet */
        atomic_t count;		/* reference counter */
        void (*func)(unsigned long); /* tasklet handler function */
        unsigned long data;  /* argument to the tasklet function */
};
```

state field
-------------

It can be 
-	a) TASKLET_STATE_SCHED
-	b) TASKLET_STATE_RUN
--------------
- TASKLET_STATE_SCHED denotes a tasklet that is scheduled to run
- TASKLET_STATE_RUN denotes a tasklet that is running

TASKLET_STATE_RUN is used only on multiprocessor machines.

It is used to protect tasklets against concurrent execution on several processors.

count field
------------

used as a reference count for the tasklet
- count = 0 	===>	the tasklet is enabled and can run if marked pending
- count = nonzero  ==>		the tasklet is disabled and cannot run

